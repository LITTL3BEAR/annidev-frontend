@use '@angular/material' as mat;
@use 'sass:map';
@use './variables' as v;

$minimal-primary: (
  50: v.$primary-50,
  100: v.$primary-100,
  200: v.$primary-200,
  300: v.$primary-300,
  400: v.$primary-400,
  500: v.$primary-500,
  600: v.$primary-600,
  700: v.$primary-700,
  800: v.$primary-800,
  900: v.$primary-900,
  contrast: (
    50: v.$text-primary,
    100: v.$text-primary,
    200: v.$text-primary,
    300: v.$text-primary,
    400: v.$text-primary,
    500: v.$neutral-50,
    600: v.$neutral-50,
    700: v.$neutral-50,
    800: v.$neutral-50,
    900: v.$neutral-50,
  )
);

$minimal-accent: (
  50: v.$secondary-50,
  100: v.$secondary-100,
  200: v.$secondary-200,
  300: v.$secondary-300,
  400: v.$secondary-400,
  500: v.$secondary-500,
  600: v.$secondary-600,
  700: v.$secondary-700,
  800: v.$secondary-800,
  900: v.$secondary-900,
  contrast: (
    50: v.$text-primary,
    100: v.$text-primary,
    200: v.$text-primary,
    300: v.$text-primary,
    400: v.$text-primary,
    500: v.$neutral-50,
    600: v.$neutral-50,
    700: v.$neutral-50,
    800: v.$neutral-50,
    900: v.$neutral-50,
  )
);

$minimal-warn: (
  50: v.$warn-50,
  100: v.$warn-100,
  200: v.$warn-200,
  300: v.$warn-300,
  400: v.$warn-400,
  500: v.$warn-500,
  600: v.$warn-600,
  700: v.$warn-700,
  800: v.$warn-800,
  900: v.$warn-900,
  contrast: (
    50: v.$text-primary,
    100: v.$text-primary,
    200: v.$text-primary,
    300: v.$text-primary,
    400: v.$text-primary,
    500: v.$neutral-50,
    600: v.$neutral-50,
    700: v.$neutral-50,
    800: v.$neutral-50,
    900: v.$neutral-50,
  )
);

$minimal-primary: mat.define-palette($minimal-primary, 500, 100, 900);
$minimal-accent: mat.define-palette($minimal-accent, 500, 100, 900);
$minimal-warn: mat.define-palette($minimal-warn, 500, 100, 900);

$minimal-light-theme: mat.define-light-theme((
  color: (
    primary: $minimal-primary,
    accent: $minimal-accent,
    warn: $minimal-warn,
  )
));

$minimal-dark-theme: mat.define-dark-theme((
  color: (
    primary: $minimal-primary,
    accent: $minimal-accent,
    warn: $minimal-warn,
  )
));

@function create-theme-vars($theme) {
  $color-config: mat.get-color-config($theme);
  $primary-palette: map.get($color-config, 'primary');
  $accent-palette: map.get($color-config, 'accent');
  $warn-palette: map.get($color-config, 'warn');
  $is-dark: map.get($color-config, 'is-dark');

  @return (
    --primary: #{mat.get-color-from-palette($primary-palette, 500)},
    --accent: #{mat.get-color-from-palette($accent-palette, 500)},
    --warn: #{mat.get-color-from-palette($warn-palette, 500)},
    --background: #{if($is-dark, v.$background-dark, v.$background-light)},
    --text: #{if($is-dark, v.$neutral-50, v.$text-primary)},
    --card: #{if($is-dark, v.$card-background-dark, v.$card-background-light)},
    --is-dark: #{$is-dark}
  );
}

@mixin apply-theme-vars($theme) {
  $vars: create-theme-vars($theme);
  @each $name, $value in $vars {
    #{$name}: #{$value};
  }
}

@mixin theme-styles($theme) {
  $color-config: mat.get-color-config($theme);
  $is-dark: map.get($color-config, 'is-dark');

  body {
    background-color: var(--background);
    color: var(--text);
  }

  .mat-mdc-card {
    background-color: var(--card);
  }
}